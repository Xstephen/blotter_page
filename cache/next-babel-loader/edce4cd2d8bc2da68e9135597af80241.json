{"ast":null,"code":"import \"antd/lib/card/style/css\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/collapse/style/css\";\nimport _Collapse from \"antd/lib/collapse\";\nimport \"antd/lib/typography/style/css\";\nimport _Typography from \"antd/lib/typography\";\nimport \"antd/lib/avatar/style/css\";\nimport _Avatar from \"antd/lib/avatar\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport \"antd/lib/descriptions/style/css\";\nimport _Descriptions from \"antd/lib/descriptions\";\nimport \"antd/lib/table/style/css\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/popover/style/css\";\nimport _Popover from \"antd/lib/popover\";\nimport \"antd/lib/list/style/css\";\nimport _List from \"antd/lib/list\";\nimport \"antd/lib/button/style/css\";\nimport _Button from \"antd/lib/button\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Head from 'next/head';\nimport { GithubOutlined, QqOutlined, MailOutlined, ZhihuOutlined, WechatOutlined, AlipayOutlined } from '@ant-design/icons';\nimport Container from '@/components/container';\nimport If from '@/components/if';\nimport { Context } from '@/utils/global';\nimport { showQR } from '@/utils/payment';\nimport { githubRepos, about } from '@/utils/api';\nimport moment from 'moment';\n\nfunction ToColumnCount(num) {\n  var count = [1, 2, 3, 4, 6, 8, 12, 24];\n\n  for (var i = 0; i < count.length; i++) {\n    if (count[i] >= num) return count[i];\n  }\n\n  return count[count.length - 1];\n}\n\nvar AboutPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(AboutPage, _React$Component);\n\n  var _super = _createSuper(AboutPage);\n\n  function AboutPage(props) {\n    var _this;\n\n    _classCallCheck(this, AboutPage);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"render_pay\", function () {\n      return __jsx(_List, {\n        dataSource: [{\n          name: 'wechat',\n          icon: __jsx(WechatOutlined, null)\n        }, {\n          name: 'alipay',\n          icon: __jsx(AlipayOutlined, null)\n        }],\n        grid: {\n          column: 2\n        },\n        style: {\n          textAlign: 'center'\n        },\n        renderItem: function renderItem(item, idx) {\n          return __jsx(_List.Item, {\n            key: idx\n          }, __jsx(_Button, {\n            size: \"large\",\n            shape: \"circle\",\n            icon: item.icon,\n            onClick: function onClick() {\n              return showQR(item.name);\n            }\n          }));\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"render_social\", function () {\n      var socialMedia = [{\n        raw: _this.props.github,\n        name: \"Github: \".concat(_this.props.github),\n        link: \"https://github.com/\".concat(_this.props.github),\n        icon: function icon() {\n          return __jsx(GithubOutlined, null);\n        }\n      }, {\n        raw: _this.props.qq,\n        name: \"QQ: \".concat(_this.props.qq),\n        link: \"https://wpa.qq.com/msgrd?v=3&uin=\".concat(_this.props.qq, \"&site=qq&menu=yes\"),\n        icon: function icon() {\n          return __jsx(QqOutlined, null);\n        }\n      }, {\n        raw: _this.props.email,\n        name: \"Email: \".concat(_this.props.email),\n        link: \"mailto:\".concat(_this.props.email),\n        icon: function icon() {\n          return __jsx(MailOutlined, null);\n        }\n      }, {\n        raw: _this.props.zhihu,\n        name: \"\\u77E5\\u4E4E\",\n        link: \"https://www.zhihu.com/people/\".concat(_this.props.zhihu),\n        icon: function icon() {\n          return __jsx(ZhihuOutlined, null);\n        }\n      }].filter(function (item) {\n        return !!item.raw;\n      });\n      return __jsx(_List, {\n        grid: {\n          column: ToColumnCount(socialMedia.length),\n          gutter: 10\n        },\n        dataSource: socialMedia,\n        style: {\n          fontSize: '25px',\n          textAlign: 'center'\n        },\n        renderItem: function renderItem(item) {\n          return __jsx(_List.Item, {\n            key: item.name\n          }, __jsx(\"a\", {\n            href: item.link,\n            target: \"_blank\"\n          }, __jsx(_Popover, {\n            content: item.name\n          }, __jsx(\"span\", {\n            className: \"text-color\"\n          }, item.icon()))));\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"render_education\", function () {\n      var columns = [{\n        dataIndex: 'name',\n        title: '名称',\n        align: 'center'\n      }, {\n        dataIndex: 'major',\n        title: '方向',\n        align: 'center',\n        width: 250,\n        ellipsis: true\n      }, {\n        dataIndex: 'time',\n        title: '时间',\n        align: 'center',\n        width: 250,\n        ellipsis: true\n      }];\n      return __jsx(_Table, {\n        rowKey: function rowKey(record) {\n          return record.name;\n        },\n        dataSource: _this.props.edu,\n        columns: columns,\n        pagination: false,\n        scroll: {\n          x: true\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"render_awards\", function () {\n      var columns = [{\n        dataIndex: 'name',\n        align: 'center'\n      }, {\n        dataIndex: 'level',\n        align: 'center',\n        width: 250,\n        ellipsis: true\n      }, {\n        dataIndex: 'count',\n        render: function render(value) {\n          return \"\\xD7\".concat(value);\n        },\n        align: 'center',\n        width: 250,\n        ellipsis: true\n      }];\n      return __jsx(_Table, {\n        dataSource: _this.props.awards,\n        rowKey: function rowKey(record) {\n          return record.name;\n        },\n        columns: columns,\n        size: \"small\",\n        showHeader: false,\n        pagination: false,\n        scroll: {\n          x: true\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"render_projects\", function () {\n      if (!!!_this.props.github) return null;\n      var columns = [{\n        dataIndex: 'name',\n        title: '项目名',\n        ellipsis: true,\n        align: 'center',\n        render: function render(value, record) {\n          return __jsx(\"a\", {\n            target: \"_blank\",\n            href: record.html_url\n          }, value);\n        }\n      }, {\n        dataIndex: 'stargazers_count',\n        title: 'star数',\n        align: 'center',\n        width: 100,\n        ellipsis: true,\n        sorter: function sorter(a, b) {\n          return a.stargazers_count - b.stargazers_count;\n        }\n      }, {\n        dataIndex: 'forks_count',\n        title: 'fork数',\n        align: 'center',\n        width: 100,\n        ellipsis: true,\n        sorter: function sorter(a, b) {\n          return a.forks_count - b.forks_count;\n        }\n      }, {\n        dataIndex: 'pushed_at',\n        title: '最新更新',\n        align: 'center',\n        defaultSortOrder: 'descend',\n        sorter: function sorter(a, b) {\n          return new Date(a.pushed_at).getTime() - new Date(b.pushed_at).getTime();\n        },\n        render: function render(text) {\n          return moment(text).format('YYYY-MM-DD hh:mm:ss');\n        },\n        width: 200,\n        ellipsis: true\n      }, {\n        dataIndex: 'language',\n        title: '语言',\n        filters: Array.from(new Set(_this.state.repos.map(function (item) {\n          return item.language;\n        }).filter(function (l) {\n          return l !== null;\n        }))).map(function (l) {\n          return {\n            text: l,\n            value: l\n          };\n        }),\n        onFilter: function onFilter(value, record) {\n          return record.language && record.language.includes(record.language);\n        },\n        align: 'center',\n        width: 150,\n        ellipsis: true\n      }];\n      return __jsx(_Table, {\n        rowKey: function rowKey(record) {\n          return record.name;\n        },\n        dataSource: _this.state.repos,\n        columns: columns,\n        loading: _this.state.loading,\n        scroll: {\n          x: true\n        },\n        expandable: {\n          expandedRowRender: function expandedRowRender(record) {\n            return __jsx(_Descriptions, {\n              bordered: true,\n              size: \"small\"\n            }, __jsx(_Descriptions.Item, {\n              key: \"created_at\",\n              label: \"\\u521B\\u5EFA\\u65F6\\u95F4\"\n            }, record.created_at), __jsx(_Descriptions.Item, {\n              key: \"pushed_at\",\n              label: \"\\u6700\\u8FD1\\u63A8\\u9001\\u65F6\\u95F4\"\n            }, record.pushed_at), __jsx(_Descriptions.Item, {\n              key: \"updated_at\",\n              label: \"\\u6570\\u636E\\u66F4\\u65B0\\u65F6\\u95F4\"\n            }, record.updated_at), __jsx(_Descriptions.Item, {\n              key: \"description\",\n              label: \"\\u63CF\\u8FF0\"\n            }, record.description));\n          }\n        },\n        pagination: {\n          pageSize: 10\n        }\n      });\n    });\n\n    _this.state = {\n      repos: [],\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(AboutPage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var repos, i, r;\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!this.props.github) {\n                _context.next = 14;\n                break;\n              }\n\n              this.setState({\n                loading: true\n              });\n              repos = [];\n              i = 1;\n\n            case 4:\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(githubRepos(this.props.github, i));\n\n            case 6:\n              r = _context.sent;\n\n              if (!(r.length == 0)) {\n                _context.next = 9;\n                break;\n              }\n\n              return _context.abrupt(\"break\", 13);\n\n            case 9:\n              repos = repos.concat(r);\n\n            case 10:\n              i++;\n              _context.next = 4;\n              break;\n\n            case 13:\n              this.setState({\n                repos: repos,\n                loading: false\n              });\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(Container, null, __jsx(Context.Consumer, null, function (context) {\n        return __jsx(Head, null, __jsx(\"title\", null, \"\\u5173\\u4E8E\\u6211|\".concat(context.blog_name)));\n      }), __jsx(_Card, null, __jsx(_Typography, null, __jsx(_Typography.Paragraph, {\n        style: {\n          textAlign: 'center'\n        }\n      }, __jsx(_Avatar, {\n        size: 64,\n        src: \"/static/img/logo.svg\"\n      }), __jsx(\"br\", null), __jsx(_Typography.Text, {\n        strong: true\n      }, this.props.author)), __jsx(If, {\n        condition: !!this.props.quote\n      }, __jsx(_Typography.Paragraph, {\n        style: {\n          textAlign: 'center'\n        }\n      }, __jsx(\"em\", {\n        dangerouslySetInnerHTML: {\n          __html: this.props.quote\n        }\n      }))), __jsx(If, {\n        condition: !!this.props.description\n      }, __jsx(_Typography.Paragraph, {\n        style: {\n          textAlign: 'center'\n        }\n      }, __jsx(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: this.props.description\n        }\n      }))), __jsx(_Typography.Paragraph, null, this.render_pay()), __jsx(_Typography.Paragraph, null, this.render_social()), __jsx(_Collapse, {\n        defaultActiveKey: ['education', 'awards', 'projects']\n      }, __jsx(_Collapse.Panel, {\n        header: \"\\u6559\\u80B2\\u3001\\u5DE5\\u4F5C\\u7ECF\\u5386\",\n        key: \"education\"\n      }, this.render_education()), __jsx(_Collapse.Panel, {\n        header: \"\\u62B1\\u5927\\u817F\\u5956\\u9879\",\n        key: \"awards\"\n      }, this.render_awards()), __jsx(_Collapse.Panel, {\n        header: \"\\u5F00\\u6E90\\u9879\\u76EE\\uFF08\\u9700\\u8981\\u8BBF\\u95EE Github API\\uFF0C\\u90E8\\u5206\\u7F51\\u7EDC\\u53EF\\u80FD\\u4F1A\\u51FA\\u9519\\uFF09\",\n        key: \"projects\"\n      }, this.render_projects())))));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function getInitialProps() {\n      var r;\n      return _regeneratorRuntime.async(function getInitialProps$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(about());\n\n            case 2:\n              r = _context2.sent;\n              return _context2.abrupt(\"return\", r);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }]);\n\n  return AboutPage;\n}(React.Component);\n\n_defineProperty(AboutPage, \"defaultProps\", {});\n\nexport default AboutPage;","map":null,"metadata":{},"sourceType":"module"}