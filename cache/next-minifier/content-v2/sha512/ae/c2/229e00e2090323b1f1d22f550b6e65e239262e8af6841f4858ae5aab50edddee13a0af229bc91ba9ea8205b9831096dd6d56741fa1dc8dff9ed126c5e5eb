{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{\"5D78\":function(t,e,n){\"use strict\";n.d(e,\"b\",(function(){return o})),n.d(e,\"a\",(function(){return s}));n(\"MQDG\");var a=n(\"rR1Q\"),r=n.n(a);function o(t){return t.success?r.a.success({message:t.title,description:t.content}):r.a.error({message:t.title,description:t.content}),t.success}function s(t){\"undefined\"!==typeof document&&(Notification.requestPermission(),new Notification(\"\\u901a\\u77e5\",{body:t,icon:\"/static/img/logo_196x196.png\"}))}},\"EE/t\":function(t,e,n){\"use strict\";n.r(e);n(\"RV09\");var a=n(\"N9UN\"),r=n.n(a),o=(n(\"X1UN\"),n(\"hqwM\")),s=n.n(o),i=(n(\"SoD3\"),n(\"9xET\")),c=n.n(i),u=(n(\"1mXb\"),n(\"iJl9\")),l=n.n(u),f=(n(\"YKpo\"),n(\"ZPTe\")),p=n.n(f),d=(n(\"89vs\"),n(\"lbd2\")),v=n.n(d),y=(n(\"bAY4\"),n(\"4IMT\")),h=n.n(y),m=(n(\"SJAb\"),n(\"pWf2\")),g=n.n(m),b=n(\"o0o1\"),O=n.n(b),w=n(\"1OyB\"),j=n(\"vuIU\"),S=n(\"JX7q\"),x=n(\"Ji7U\"),_=n(\"md7G\"),P=n(\"foSv\"),k=n(\"rePB\"),q=n(\"q1tI\"),C=n.n(q),E=n(\"8Kt/\"),A=n.n(E),I=n(\"nOHt\"),R=n(\"pJr+\"),N=n(\"dSKx\"),D=n(\"AoAR\"),T=n(\"5D78\"),W=n(\"IgCw\"),Q=C.a.createElement;function M(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var J=function(t){Object(x.a)(a,t);var e,n=(e=a,function(){var t,n=Object(P.a)(e);if(M()){var a=Object(P.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(_.a)(this,t)});function a(t){var e;return Object(w.a)(this,a),e=n.call(this,t),Object(k.a)(Object(S.a)(e),\"context\",void 0),Object(k.a)(Object(S.a)(e),\"getData\",(function(){var t;return O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.awrap(Object(D.p)(e.props.router.query.username));case 2:t=n.sent,e.setState({user:t});case 4:case\"end\":return n.stop()}}),null,null,null,Promise)})),Object(k.a)(Object(S.a)(e),\"update\",(function(){var t,n,a,r,o,s,i,c,u,l;return O.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:return e.setState({loading:!0}),t=e.state.user,n=t.username,a=t.email,r=t.ns_id,o=t.ns_name,s=t.ac_name,i=t.ac_island,c=t.qq,u=t.avatar,f.next=4,O.a.awrap(Object(D.F)(n,a,u,r,o,s,i,c,e.state.password));case 4:l=f.sent,Object(T.b)(l)&&(e.props.router.push(\"/user/[username]\",\"/user/\".concat(n)),e.context.callback({user:e.state.user})),e.setState({loading:!1});case 7:case\"end\":return f.stop()}}),null,null,null,Promise)})),e.state={user:e.props.user,loading:!1,loadingAvatar:!1,password:\"\"},e}return Object(j.a)(a,[{key:\"componentDidMount\",value:function(){this.getData()}},{key:\"render\",value:function(){var t=this,e=[{key:\"avatar\",name:\"\\u5934\\u50cf\",self:!0,rewrite:function(t){return t.replace(\"http://\",\"https://\")}},{key:\"username\",name:\"\\u7528\\u6237\\u540d\",self:!1},{key:\"email\",name:\"\\u90ae\\u7bb1\",self:!1},{key:\"qq\",name:\"QQ \\u53f7\",self:!0},{key:\"ns_id\",name:\"NS ID\",self:!1,prefix:\"SW\",rewrite:function(t){return t.replace(/[^0-9\\-]/g,\"\")}},{key:\"ns_name\",name:\"NS \\u540d\\u79f0\",self:!1},{key:\"ac_name\",name:\"\\u52a8\\u68ee\\u540d\\u79f0\",self:!1},{key:\"ac_island\",name:\"\\u52a8\\u68ee\\u5c9b\\u540d\",self:!1,suffix:\"\\u5c9b\",rewrite:function(t){return t.length>0&&\"\\u5c9b\"==t[t.length-1]&&(t=t.slice(0,t.length-1)),t}}],n=this.state.user.self?e:e.filter((function(t){return!t.self}));return Q(R.c,null,Q(N.a.Consumer,null,(function(e){return Q(A.a,null,Q(\"title\",null,\"\".concat(t.props.router.query.username,\"|\\u7528\\u6237\\u9875|\").concat(e.blog_name)))})),Q(r.a,null,Q(\"p\",{style:{textAlign:\"center\"}},Q(g.a,{size:128,src:this.state.user.avatar})),Q(W.a,{condition:this.state.user.self},Q(R.a,{direction:\"horizontal\",flexCenter:!0},Q(h.a,{loading:this.state.loadingAvatar,onClick:function(){var e;return O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t.setState({loadingAvatar:!0}),n.next=3,O.a.awrap(Object(D.g)(t.state.user.email));case 3:e=n.sent,t.setState((function(t){var n=t.user;return n.avatar=e.avatar,{user:n,loadingAvatar:!1}}));case 5:case\"end\":return n.stop()}}),null,null,null,Promise)}},\"\\u6839\\u636e\\u90ae\\u7bb1\\u66f4\\u65b0 Github\\u3001Gavatar \\u5934\\u50cf\"),Q(\"a\",{href:\"/api/user/qq_avatar\",target:\"_blank\"},Q(h.a,{disabled:!this.state.user.qq_connected},\"\\u66f4\\u65b0 QQ \\u5934\\u50cf\")),Q(h.a,{onClick:function(){return t.getData()}},\"\\u5237\\u65b0\\u6570\\u636e\"))),Q(s.a,{dataSource:n,renderItem:function(e){return Q(s.a.Item,{key:e.key},Q(c.a,{style:{width:\"100%\"}},Q(p.a,{span:4},Q(v.a.Text,{strong:!0},e.name)),Q(p.a,{span:20},t.state.user.self?Q(l.a,{addonBefore:e.prefix,addonAfter:e.suffix,value:t.state.user[e.key],onChange:function(n){var a=n.target.value;e.rewrite&&(a=e.rewrite(a)),t.setState((function(t){var n=t.user;return n[e.key]=a,{user:n}}))}}):Q(\"p\",null,e.prefix,\" \",t.state.user[e.key],\" \",e.suffix))))}}),Q(W.a,{condition:this.state.user.self},Q(R.a,null,Q(l.a,{type:\"password\",placeholder:\"\\u5982\\u679c\\u4e0d\\u9700\\u8981\\u4fee\\u6539\\u5bc6\\u7801\\u8bf7\\u7559\\u7a7a\",value:this.state.password,onChange:function(e){return t.setState({password:e.target.value})}}),Q(c.a,{justify:\"space-between\"},Q(p.a,null,this.state.user.qq_connected?Q(h.a,{disabled:!0},\"\\u5df2\\u7ed1\\u5b9a QQ \\u767b\\u5f55\"):Q(\"a\",{href:\"/api/user/jump_to_qq?state=connect\",target:\"_blank\"},Q(h.a,null,\"\\u7ed1\\u5b9a QQ \\u767b\\u5f55\"))),Q(p.a,null,this.state.user.github_connected?Q(h.a,{disabled:!0},\"\\u5df2\\u7ed1\\u5b9a Github \\u767b\\u5f55\"):Q(\"a\",{href:\"/api/user/jump_to_github?state=connect\",target:\"_blank\"},Q(h.a,null,\"\\u7ed1\\u5b9a Github \\u767b\\u5f55\"))),Q(p.a,{style:{textAlign:\"right\"}},Q(h.a,{loading:this.state.loading,type:\"primary\",onClick:this.update},\"\\u66f4\\u65b0\\u4fe1\\u606f\")))))))}}],[{key:\"getInitialProps\",value:function(t){var e;return O.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.a.awrap(Object(D.p)(t.query.username));case 2:return e=n.sent,n.abrupt(\"return\",{user:e});case 4:case\"end\":return n.stop()}}),null,null,null,Promise)}}]),a}(C.a.Component);Object(k.a)(J,\"defaultProps\",{}),Object(k.a)(J,\"contextType\",N.a),e.default=Object(I.withRouter)(J)},IgCw:function(t,e,n){\"use strict\";var a=n(\"1OyB\"),r=n(\"vuIU\"),o=n(\"Ji7U\"),s=n(\"md7G\"),i=n(\"foSv\"),c=n(\"rePB\"),u=n(\"q1tI\");function l(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var f=function(t){Object(o.a)(c,t);var e,n=(e=c,function(){var t,n=Object(i.a)(e);if(l()){var a=Object(i.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(s.a)(this,t)});function c(t){return Object(a.a)(this,c),n.call(this,t)}return Object(r.a)(c,[{key:\"render\",value:function(){return this.props.condition?this.props.children:null}}]),c}(n.n(u).a.Component);Object(c.a)(f,\"defaultProps\",{condition:!0}),e.a=f},SJAb:function(t,e,n){\"use strict\";n(\"1SKB\"),n(\"Tlp2\")},Tlp2:function(t,e,n){t.exports={\"ant-avatar\":\"ant-avatar\",antAvatar:\"ant-avatar\",\"ant-avatar-image\":\"ant-avatar-image\",antAvatarImage:\"ant-avatar-image\",\"ant-avatar-string\":\"ant-avatar-string\",antAvatarString:\"ant-avatar-string\",\"ant-avatar-icon\":\"ant-avatar-icon\",antAvatarIcon:\"ant-avatar-icon\",anticon:\"anticon\",\"ant-avatar-lg\":\"ant-avatar-lg\",antAvatarLg:\"ant-avatar-lg\",\"ant-avatar-lg-string\":\"ant-avatar-lg-string\",antAvatarLgString:\"ant-avatar-lg-string\",\"ant-avatar-sm\":\"ant-avatar-sm\",antAvatarSm:\"ant-avatar-sm\",\"ant-avatar-sm-string\":\"ant-avatar-sm-string\",antAvatarSmString:\"ant-avatar-sm-string\",\"ant-avatar-square\":\"ant-avatar-square\",antAvatarSquare:\"ant-avatar-square\"}},pWf2:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var a=function(t){if(t&&t.__esModule)return t;if(null===t||\"object\"!==u(t)&&\"function\"!==typeof t)return{default:t};var e=c();if(e&&e.has(t))return e.get(t);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=a?Object.getOwnPropertyDescriptor(t,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=t[r]}n.default=t,e&&e.set(t,n);return n}(n(\"q1tI\")),r=i(n(\"TSYQ\")),o=n(\"vgIT\"),s=i(n(\"aVg8\"));function i(t){return t&&t.__esModule?t:{default:t}}function c(){if(\"function\"!==typeof WeakMap)return null;var t=new WeakMap;return c=function(){return t},t}function u(t){return(u=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){return!e||\"object\"!==u(e)&&\"function\"!==typeof e?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):e}function y(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t,e){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(null!=t&&\"function\"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(t);r<a.length;r++)e.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(n[a[r]]=t[a[r]])}return n},g=function(t){!function(t,e){if(\"function\"!==typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(g,t);var e,n,i,c,u=(e=g,function(){var t,n=h(e);if(y()){var a=h(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return v(this,t)});function g(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,g),(t=u.apply(this,arguments)).state={scale:1,mounted:!1,isImgExist:!0},t.setScale=function(){if(t.avatarChildren&&t.avatarNode){var e=t.avatarChildren.offsetWidth,n=t.avatarNode.offsetWidth;0===e||0===n||t.lastChildrenWidth===e&&t.lastNodeWidth===n||(t.lastChildrenWidth=e,t.lastNodeWidth=n,t.setState({scale:n-8<e?(n-8)/e:1}))}},t.handleImgLoadError=function(){var e=t.props.onError;!1!==(e?e():void 0)&&t.setState({isImgExist:!1})},t.renderAvatar=function(e){var n,o,i=e.getPrefixCls,c=t.props,u=c.prefixCls,p=c.shape,d=c.size,v=c.src,y=c.srcSet,h=c.icon,g=c.className,b=c.alt,O=m(c,[\"prefixCls\",\"shape\",\"size\",\"src\",\"srcSet\",\"icon\",\"className\",\"alt\"]);(0,s.default)(!(\"string\"===typeof h&&h.length>2),\"Avatar\",\"`icon` is using ReactNode instead of string naming in v4. Please check `\".concat(h,\"` at https://ant.design/components/icon\"));var w=t.state,j=w.isImgExist,S=w.scale,x=(w.mounted,i(\"avatar\",u)),_=(0,r.default)((f(n={},\"\".concat(x,\"-lg\"),\"large\"===d),f(n,\"\".concat(x,\"-sm\"),\"small\"===d),n)),P=(0,r.default)(x,g,_,(f(o={},\"\".concat(x,\"-\").concat(p),p),f(o,\"\".concat(x,\"-image\"),v&&j),f(o,\"\".concat(x,\"-icon\"),h),o)),k=\"number\"===typeof d?{width:d,height:d,lineHeight:\"\".concat(d,\"px\"),fontSize:h?d/2:18}:{},q=t.props.children;if(v&&j)q=a.createElement(\"img\",{src:v,srcSet:y,onError:t.handleImgLoadError,alt:b});else if(h)q=h;else{if(t.avatarChildren||1!==S){var C=\"scale(\".concat(S,\") translateX(-50%)\"),E={msTransform:C,WebkitTransform:C,transform:C},A=\"number\"===typeof d?{lineHeight:\"\".concat(d,\"px\")}:{};q=a.createElement(\"span\",{className:\"\".concat(x,\"-string\"),ref:function(e){return t.avatarChildren=e},style:l(l({},A),E)},q)}else{q=a.createElement(\"span\",{className:\"\".concat(x,\"-string\"),style:{opacity:0},ref:function(e){return t.avatarChildren=e}},q)}}return(a.createElement(\"span\",l({},O,{style:l(l({},k),O.style),className:P,ref:function(e){return t.avatarNode=e}}),q))},t}return n=g,(i=[{key:\"componentDidMount\",value:function(){this.setScale(),this.setState({mounted:!0})}},{key:\"componentDidUpdate\",value:function(t){this.setScale(),t.src!==this.props.src&&this.setState({isImgExist:!0,scale:1})}},{key:\"render\",value:function(){return a.createElement(o.ConfigConsumer,null,this.renderAvatar)}}])&&p(n.prototype,i),c&&p(n,c),g}(a.Component);e.default=g,g.defaultProps={shape:\"circle\",size:\"default\"}},uOxi:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/user/[username]\",function(){return n(\"EE/t\")}])}},[[\"uOxi\",1,2,0,3,4,7,5,8,6,9,10,12,11,14,16,15,18,22,23]]]);","extractedComments":[]}