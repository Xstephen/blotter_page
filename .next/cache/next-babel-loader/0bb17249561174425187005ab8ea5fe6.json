{"ast":null,"code":"import \"antd/lib/page-header/style/css\";\nimport _PageHeader from \"antd/lib/page-header\";\nimport \"antd/lib/divider/style/css\";\nimport _Divider from \"antd/lib/divider\";\nimport \"antd/lib/card/style/css\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/popover/style/css\";\nimport _Popover from \"antd/lib/popover\";\nimport \"antd/lib/avatar/style/css\";\nimport _Avatar from \"antd/lib/avatar\";\nimport \"antd/lib/list/style/css\";\nimport _List from \"antd/lib/list\";\nimport \"antd/lib/tooltip/style/css\";\nimport _Tooltip from \"antd/lib/tooltip\";\nimport \"antd/lib/typography/style/css\";\nimport _Typography from \"antd/lib/typography\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Fragment } from 'react';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport Container from '@/components/container';\nimport { Context } from '@/utils/global';\nimport { friends } from '@/utils/api';\nimport styles from './friends.less';\nimport moment from '@/utils/moment';\nmoment.locale('zh-cn');\nconst maxPostNumber = 5;\n\nclass Friends extends React.Component {\n  static async getInitialProps(args) {\n    var data = await friends();\n    return {\n      friends: data,\n      rendered: true\n    };\n  }\n\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"getSourceData\", posts => {\n      var list = [];\n\n      for (var i = 0; i < maxPostNumber; i++) {\n        if (i < posts.length) {\n          var post = posts[i];\n          list.push(__jsx(\"a\", {\n            href: post.link,\n            target: \"_blank\"\n          }, __jsx(_Tooltip, {\n            title: post.title\n          }, __jsx(_Typography.Text, {\n            ellipsis: true,\n            style: {\n              width: post.time !== 0 ? 'calc(100% - 4em)' : '100%'\n            }\n          }, post.title)), post.time !== 0 ? __jsx(_Tooltip, {\n            title: moment(post.time, 'X').format('YYYY-MM-DD HH:mm:SS')\n          }, __jsx(_Typography.Text, {\n            ellipsis: true,\n            style: {\n              width: '4em',\n              textAlign: 'right'\n            }\n          }, __jsx(\"span\", {\n            style: {\n              fontSize: '0.75em'\n            }\n          }, moment(post.time, 'X').fromNow()))) : null));\n        } else {\n          list.push(__jsx(_Typography.Text, {\n            ellipsis: true,\n            style: {\n              width: '100%'\n            }\n          }, \"\\u6CA1\\u6709\\u6570\\u636E\"));\n        }\n      }\n\n      return list;\n    });\n\n    _defineProperty(this, \"renderListItem\", (item, idx) => __jsx(_List.Item, {\n      key: idx\n    }, item));\n\n    _defineProperty(this, \"renderCard\", friend => {\n      return __jsx(_Card, {\n        hoverable: true\n      }, __jsx(_Card.Meta, {\n        avatar: __jsx(_Avatar, {\n          className: styles.avatar,\n          icon: __jsx(\"img\", _extends({\n            src: friend.image\n          }, {\n            referrerPolicy: 'no-referrer'\n          }))\n        }),\n        title: __jsx(_Popover, {\n          title: friend.name,\n          content: friend.description\n        }, __jsx(\"a\", {\n          href: friend.link,\n          target: \"_blank\",\n          className: \"text-color\"\n        }, friend.name)),\n        description: __jsx(_Popover, {\n          title: friend.name,\n          content: friend.description\n        }, __jsx(_Typography.Text, {\n          ellipsis: true,\n          style: {\n            lineHeight: '2em',\n            width: '100%'\n          }\n        }, !!friend.description ? friend.description : '没有描述'))\n      }), __jsx(_Divider, {\n        style: {\n          margin: '20px 0 0 0'\n        }\n      }), __jsx(_List, {\n        className: styles.list,\n        itemLayout: \"horizontal\",\n        size: \"small\",\n        dataSource: this.getSourceData(friend.posts),\n        renderItem: this.renderListItem\n      }), !!friend.rss ? __jsx(\"div\", {\n        className: styles.corner,\n        style: {\n          background: !!friend.error ? 'crimson' : 'mediumseagreen'\n        }\n      }, !!friend.error ? '抓取失败' : '抓取成功') : null);\n    });\n\n    this.state = {\n      loading: false\n    };\n  }\n\n  render() {\n    return __jsx(Container, null, __jsx(Context.Consumer, null, context => __jsx(Fragment, null, __jsx(Head, null, __jsx(\"title\", null, `优秀博客订阅|${context.blog_name}`)), __jsx(_Card, {\n      style: {\n        marginBottom: '10px'\n      }\n    }, __jsx(_PageHeader, {\n      title: \"\\u4F18\\u79C0\\u535A\\u5BA2\\u8BA2\\u9605\",\n      subTitle: \"\\u53CB\\u60C5\\u94FE\\u63A5\"\n    }, __jsx(_Typography.Paragraph, null, \"\\u53EF\\u4EE5\\u5728\", __jsx(Link, {\n      href: \"/comment\"\n    }, __jsx(\"a\", null, \"\\u8BC4\\u8BBA\\u533A\")), \"\\u6216\\u8005\\u4F7F\\u7528\", __jsx(\"a\", {\n      href: `mailto:${context.email}`\n    }, \"\\u90AE\\u4EF6\"), \"\\u6DFB\\u52A0\\u8BA2\\u9605(\\u7533\\u8BF7\\u53CB\\u94FE)\"), __jsx(_Typography.Paragraph, null, \"\\u552F\\u4E00\\u7684\\u8981\\u6C42\\u5C31\\u662F\\u8D77\\u7801\\u4E00\\u5E74\\u80FD\\u66F4\\u65B0\\u51E0\\u7BC7\\u6587\\u7AE0\\u5427\\uFF0C\\u522B\\u7684\\u53EA\\u8981\\u5185\\u5BB9\\u5408\\u6CD5\\u5408\\u89C4\\uFF0C\\u6765\\u8005\\u4E0D\\u62D2\"), __jsx(_Typography.Paragraph, null, \"\\u5982\\u679C\\u53EF\\u4EE5\\uFF0C\\u6700\\u597D\\u63D0\\u4F9Blogo\\u4EE5\\u53CA\\u7AD9\\u70B9RSS\\uFF0CRSS\\u5C06\\u7528\\u4E8E\\u66F4\\u65B0\\u6700\\u65B0\\u6587\\u7AE0\\uFF08\\u6CA1\\u6709\\u4E5F\\u6CA1\\u4E8B\\uFF0C\\u5C31\\u5F53\\u6211\\u7EC3\\u4E60\\u722C\\u866B\\u6280\\u672F\\u4E86\\uFF09\", __jsx(\"br\", null), \"\\u53CB\\u94FE\\u987A\\u5E8F\\u4F1A\\u6309\\u7167\\u535A\\u5BA2\\u6700\\u65B0\\u6587\\u7AE0\\u624B\\u52A8\\u968F\\u7F18\\u6392\\u5E8F\\uFF08\\u66F4\\u65B0\\u52E4\\u5FEB\\u7684\\u9AD8\\u8D28\\u91CF\\u5927\\u4F6C\\u4F18\\u5148\\uFF09\", __jsx(\"br\", null), \"\\u6BCF\\u6B21\\u4F1A\\u5C06\\u6700\\u65B0 \", maxPostNumber, ' ', \"\\u7BC7\\u6587\\u7AE0\\u66F4\\u65B0\\u5230\\u8FD9\\u91CC\\uFF0C\\u8FD9\\u6837\\u6211\\u5C31\\u53EF\\u4EE5\\u5728\\u4E00\\u4E2A\\u9875\\u9762\\u770B\\u5230\\u8BF8\\u4F4D\\u5927\\u4F6C\\u7684\\u6700\\u65B0\\u6210\\u679C\\u4E86\"), __jsx(_Typography.Paragraph, null, \"\\u53CB\\u94FE\\u6587\\u7AE0\\u722C\\u866B\\u89C1\", __jsx(\"a\", {\n      href: \"https://github.com/OhYee/blotter/tree/master/spider\",\n      target: \"_blank\"\n    }, \"\\u76F8\\u5173\\u4EE3\\u7801\"), \"\\uFF0CUser-Agent \\u4E3A\", __jsx(_Typography.Text, {\n      code: true\n    }, \"OhYee Spider\"), \"\\uFF0C\\u5982\\u6709\\u5FC5\\u8981\\uFF0C\\u8BF7\\u52A0\\u767D\\u540D\\u5355\\u3002\\u6587\\u7AE0\\u722C\\u53D6\\u4EFB\\u52A1\\u4F1A\\u5728\\u6BCF\\u5929\\u51CC\\u6668 3 \\u70B9\\u6267\\u884C\"))), __jsx(_List, {\n      grid: {\n        xxl: 3,\n        xl: 3,\n        md: 2,\n        sm: 1,\n        xs: 1,\n        gutter: 30\n      },\n      dataSource: this.props.friends,\n      renderItem: friend => __jsx(_List.Item, {\n        key: friend.link,\n        style: {\n          width: '100vw',\n          overflow: 'hidden',\n          position: 'relative'\n        }\n      }, this.renderCard(friend))\n    }))));\n  }\n\n}\n\n_defineProperty(Friends, \"defaultProps\", {\n  friends: []\n});\n\nexport default Friends;","map":null,"metadata":{},"sourceType":"module"}