{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction initialWASM(_x, _x2, _x3) {\n  return _initialWASM.apply(this, arguments);\n}\n\nfunction _initialWASM() {\n  _initialWASM = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(url, pkgName, callback) {\n    var go, mod, inst, result;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (!WebAssembly.instantiateStreaming) {\n              // polyfill\n              WebAssembly.instantiateStreaming = /*#__PURE__*/function () {\n                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(resp, importObject) {\n                  var source;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _context.next = 2;\n                          return resp;\n\n                        case 2:\n                          _context.next = 4;\n                          return _context.sent.arrayBuffer();\n\n                        case 4:\n                          source = _context.sent;\n                          _context.next = 7;\n                          return WebAssembly.instantiate(source, importObject);\n\n                        case 7:\n                          return _context.abrupt(\"return\", _context.sent);\n\n                        case 8:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x4, _x5) {\n                  return _ref.apply(this, arguments);\n                };\n              }();\n            }\n\n            go = new window.global.Go();\n            _context2.prev = 2;\n            _context2.next = 5;\n            return WebAssembly.instantiateStreaming(fetch(url), go.importObject);\n\n          case 5:\n            result = _context2.sent;\n            mod = result.module;\n            inst = result.instance;\n            go.run(inst);\n            return _context2.abrupt(\"return\", window.global[pkgName]);\n\n          case 12:\n            _context2.prev = 12;\n            _context2.t0 = _context2[\"catch\"](2);\n            console.error(_context2.t0);\n            if (!!callback) callback();\n            throw _context2.t0;\n\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[2, 12]]);\n  }));\n  return _initialWASM.apply(this, arguments);\n}\n\nexport default initialWASM;","map":null,"metadata":{},"sourceType":"module"}